import{M as e}from"./mockjs-7e8f174a.js";import{f as a,h as l,c as t}from"./lodash-es-fff5457b.js";import{b as s,h as i,m as o,W as r,y as n,X as u,f as d,P as c,V as m,k as p,A as f,U as y}from"./naive-ui-1c491db7.js";import{d as v,e as k}from"./@vicons-a2c8b0eb.js";import{r as h,a as b,s as j,h as g,c as _,k as w,Y as x,u as C,a8 as z,F as U,J as q,b as O,d as A,z as J,a0 as S,Z as $}from"./@vue-1baf82e9.js";import"./@amap-a03a8b99.js";import"./date-fns-222c3961.js";import"./vueuc-04e5b0aa.js";import"./evtd-2789e4a1.js";import"./seemly-0c71df87.js";import"./@css-render-7ffa2cfa.js";import"./vooks-a437919c.js";import"./vdirs-68b181a5.js";import"./@juggle-80d14552.js";import"./css-render-bd90028a.js";import"./@emotion-b17c1a96.js";import"./treemate-2040dddb.js";import"./async-validator-8d480e59.js";const N={__name:"index",setup(N){const R=e.Random,B=h(3),F=h(!0),M=h(1),P=[{label:"新增",key:"add",value:1},{label:"编辑",key:"edit",value:2},{label:"查看",key:"read",value:3}],V=b({visible:!1,state:"add"}),W=j((()=>{var e;return null==(e=P.filter((e=>e.key==V.state))[0])?void 0:e.label})),X=!0,Y=[{title:"姓名",key:"name",search:X,required:!0},{title:"年龄",key:"age",sorter:(e,a)=>e.age-a.age,search:X},{title:"地址",key:"address",search:X},{title:"出生日期",key:"date",search:X},{title:"操作",key:"actions",width:200,fixed:"right",render:e=>q(i,[q(s,{size:"small",onClick:()=>I(!0,"read",e)},{default:()=>"查看"}),q(s,{size:"small",onClick:()=>I(!0,"edit",e)},{default:()=>"编辑"})])}];let Z=h([]);const D=h({}),E=h({});g((async()=>{Z.value=await function(e,t){let s=[];return t&&a(t)&&e.map(((e,a)=>{l(e[t])&&e[t]&&(s.push(e),D[e.key]=null)})),s}(Y,"search")}));const G=Array.from({length:46}).map(((e,a)=>({key:a,name:R.cname(),age:R.natural(0,100),date:R.datetime(),address:R.county(!0)}))),H={pageSize:15};function I(e,a="add",s){V.visible=l(e)?e:!V.visible,V.state=a,e&&s?E.value=t(s):e||Object.keys(E.value).map(((e,a)=>{E.value[e]=null}))}const K=h(null);function L(){var e;return null==(e=K.value)||e.validate((e=>{if(!e)try{message.success("保存成功"+JSON.stringify(E.value))}finally{I(!1)}})),!1}const Q=()=>{F.value=!F.value};function T(){I(!0,"add")}function ee(){message.success(JSON.stringify(D.value))}function ae(){Object.keys(D.value).map(((e,a)=>{D.value[e]=null}))}return(e,a)=>{const l=p,t=u,h=s,b=d,j=s,g=i,q=c,N=o,R=r,P=f,X=y,le=m,te=n;return O(),_(U,null,[w(N,{model:C(D),"label-placement":"left","label-width":"80"},{default:x((()=>[w(q,{cols:C(B),"x-gap":C(B),collapsed:C(F),"collapsed-rows":C(M)},{default:x((()=>[(O(!0),_(U,null,A(C(Z),((e,a)=>(O(),$(t,{span:1,key:a,label:e.title,path:e.key},{default:x((()=>[w(l,{value:C(D)[e.key],"onUpdate:value":a=>C(D)[e.key]=a,placeholder:`请输入${e.title}`},null,8,["value","onUpdate:value","placeholder"])])),_:2},1032,["label","path"])))),128)),w(t,{suffix:""},{default:x((()=>[w(g,{justify:"end",class:"w-full"},{default:x((()=>[w(h,{type:"primary",onClick:T},{default:x((()=>[J("新增")])),_:1}),w(h,{type:"primary",onClick:ee},{default:x((()=>[J("搜索")])),_:1}),w(h,{onClick:ae},{default:x((()=>[J("重置")])),_:1}),w(j,{"icon-placement":"right",quaternary:"",onClick:Q},{icon:x((()=>[w(b,{component:C(F)?C(v):C(k)},null,8,["component"])])),default:x((()=>[J(" "+S(C(F)?"展开":"收起"),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["cols","x-gap","collapsed","collapsed-rows"])])),_:1},8,["model"]),w(R,{columns:Y,data:C(G),pagination:H,"max-height":500,"min-height":500,striped:""},null,8,["data"]),w(te,{show:C(V).visible,"onUpdate:show":a[0]||(a[0]=e=>C(V).visible=e),"on-after-leave":()=>I(!1),preset:"dialog",title:C(W)},z({default:x((()=>["read"!==C(V).state?(O(),$(N,{key:0,ref_key:"formRef",ref:K,"label-width":80,model:C(E)},{default:x((()=>[w(g,{vertical:""},{default:x((()=>[(O(!0),_(U,null,A(Y.filter((e=>"actions"!==e.key)),((e,a)=>(O(),$(P,{key:a,label:e.title,path:e.key,rule:{required:(null==e?void 0:e.required)||!1,message:`请输入${e.title}`}},{default:x((()=>[w(l,{value:C(E)[e.key],"onUpdate:value":a=>C(E)[e.key]=a,placeholder:`请输入${e.title}`},null,8,["value","onUpdate:value","placeholder"])])),_:2},1032,["label","path","rule"])))),128))])),_:1})])),_:1},8,["model"])):(O(),$(le,{key:1,"label-placement":"left",bordered:"",column:1},{default:x((()=>[(O(!0),_(U,null,A(Y.filter((e=>"actions"!==e.key)),((e,a)=>(O(),$(X,{key:a,label:e.title},{default:x((()=>[J(S(C(E)[e.key]),1)])),_:2},1032,["label"])))),128))])),_:1}))])),_:2},["read"!==C(V).state?{name:"action",fn:x((()=>[w(j,{type:"success",size:"small",onClick:L},{default:x((()=>[J(" 确认 ")])),_:1})])),key:"0"}:void 0]),1032,["show","on-after-leave","title"])],64)}}};export{N as default};
