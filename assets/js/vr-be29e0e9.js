import{p as t,m as e}from"./photo-sphere-viewer-dd3e072d.js";import{h as s}from"./index-ce6d66f0.js";import{r as o,h as i,D as r,b as a,c as n,g as l,u as m,j as u,z as p}from"./@vue-1baf82e9.js";import"./@amap-a03a8b99.js";import"./uevent-8009bb90.js";/* empty css                    */import"./@vueuse-d3e9aa68.js";import"./qrcode-3a4b8256.js";import"./encode-utf8-2ec93547.js";import"./dijkstrajs-b38e4460.js";import"./vue3-splitpane-9ef15b96.js";import"./naive-ui-1c491db7.js";import"./date-fns-222c3961.js";import"./vueuc-04e5b0aa.js";import"./evtd-2789e4a1.js";import"./seemly-0c71df87.js";import"./@css-render-7ffa2cfa.js";import"./vooks-a437919c.js";import"./vdirs-68b181a5.js";import"./@juggle-80d14552.js";import"./css-render-bd90028a.js";import"./@emotion-b17c1a96.js";import"./lodash-es-fff5457b.js";import"./treemate-2040dddb.js";import"./async-validator-8d480e59.js";import"./pinia-0d4f4653.js";import"./echarts-9c2009b0.js";import"./zrender-3ff8857f.js";import"./tslib-a4e99503.js";import"./axios-9a30b300.js";import"./vue-router-3b0e2eb8.js";import"./mockjs-7e8f174a.js";import"./crypto-js-fe439614.js";import"./splitpanes-0469364f.js";import"./@kjgl77-f0f1912f.js";import"./@vicons-a2c8b0eb.js";import"./qs-94839265.js";import"./side-channel-a959ba82.js";import"./get-intrinsic-fee8135b.js";import"./has-symbols-456daba2.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-af191d86.js";import"./object-inspect-89bb0d45.js";const j={id:"viewer"},d=u("div",{class:"beian",id:"Beian"},[u("span",{style:{"font-family":"arial"}},"Copyright ©scory "),p(" | "),u("a",{href:"https://beian.miit.gov.cn/",target:"_blank",class:"a"},"陕ICP备2023002971号-1")],-1),v={__name:"vr",setup(u){let p,v=null,c=o(!0),g=o(null),h=o(null);const f=JSON.parse(sessionStorage.getItem("markerList"))||[],k=o(f),y=function(){v.once("ready",(()=>{M(),v.startAutorotate()})),v.on("click",((t,e)=>{const{latitude:o,longitude:i}=e,r=s(),a=["/cxk.gif","/Gyroscope3.png"],n={longitude:i,latitude:o,image:a[Math.floor(Math.random()*a.length)],width:50,height:50,id:r};p.addMarker(n),k.value.push(n),sessionStorage.setItem("markerList",JSON.stringify(k.value))})),v.on("before-rotate",(()=>{c.value&&!g.value&&(c.value=!1),g.value&&(clearTimeout(g.value),g.value=void 0),h.value&&(clearTimeout(h.value),h.value=void 0),g.value=setTimeout(b,1e3)})),p.on("select-marker",((t,e)=>{}))};function b(){g.value=void 0,h.value=setTimeout(w,1e3),c.value=!0}function w(){h.value&&(h.value=void 0),v&&!v.isAutorotateEnabled()&&v.startAutorotate()}const M=async function(){null==p||p.clearMarkers(),k.value.forEach((t=>{null==p||p.addMarker(t)}))};return i((()=>{!async function(){v=new t.Viewer({container:"viewer",panorama:"/vr.jpg",loadingTxt:"正在加载",navbar:null,plugins:[e.MarkersPlugin],size:{width:"100%",height:"100%"},maxFov:60,defaultZoomLvl:0,defaultLong:0,defaultLat:-Math.PI/3,autorotateLat:"-0.4",autorotateDelay:1e3,autorotateSpeed:"0.4rpm"}),p=v.getPlugin(e.MarkersPlugin),y()}()})),r((()=>{null==v||v.destroy()})),(t,e)=>(a(),n("div",j,[l(t.$slots,"default",{show:m(c),markerList:m(k)}),d]))}};export{v as default};
