import{f as e,g as s}from"./index-ce6d66f0.js";import{Q as t}from"./naive-ui-1c491db7.js";import{s as n,b as i,Z as o,u as r,r as a,l,D as d,c as m,k as p,Y as u,_ as c}from"./@vue-1baf82e9.js";import{U as j}from"./unity-webgl-d7eeb606.js";/* empty css                    */import"./@vueuse-d3e9aa68.js";import"./qrcode-3a4b8256.js";import"./encode-utf8-2ec93547.js";import"./dijkstrajs-b38e4460.js";import"./vue3-splitpane-9ef15b96.js";import"./pinia-0d4f4653.js";import"./echarts-9c2009b0.js";import"./zrender-3ff8857f.js";import"./tslib-a4e99503.js";import"./axios-9a30b300.js";import"./vue-router-3b0e2eb8.js";import"./mockjs-7e8f174a.js";import"./@amap-a03a8b99.js";import"./crypto-js-fe439614.js";import"./splitpanes-0469364f.js";import"./@kjgl77-f0f1912f.js";import"./@vicons-a2c8b0eb.js";import"./qs-94839265.js";import"./side-channel-a959ba82.js";import"./get-intrinsic-fee8135b.js";import"./has-symbols-456daba2.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-af191d86.js";import"./object-inspect-89bb0d45.js";import"./lodash-es-fff5457b.js";import"./date-fns-222c3961.js";import"./vueuc-04e5b0aa.js";import"./evtd-2789e4a1.js";import"./seemly-0c71df87.js";import"./@css-render-7ffa2cfa.js";import"./vooks-a437919c.js";import"./vdirs-68b181a5.js";import"./@juggle-80d14552.js";import"./css-render-bd90028a.js";import"./@emotion-b17c1a96.js";import"./treemate-2040dddb.js";import"./async-validator-8d480e59.js";const v={__name:"index",props:{data:Array},setup(s){const a=s,{last:l,difference:d}=window.this,m=e(),p=n((()=>d(m.currentUnity.split("/"),[""]))),u=(e,s)=>{var t;p.value=e,(null==(t=s[0])?void 0:t.top)||c(a.data,e[0],"key",[],(e=>{var t;const n=[e.key,s[0].key];m.changeUrl("/"+n.join("/")+"/"),m.setSendMessage(null==(t=s[0])?void 0:t.sendMessage)}))};function c(e,s,t,n,i){null==e||e.map(((e,o)=>{e[t]==s&&i(n),(null==e?void 0:e.children)&&c(null==e?void 0:e.children,s,t,e,i)}))}return(e,s)=>{const n=t;return i(),o(n,{data:a.data,"default-expanded-keys":r(p),"default-selected-keys":[r(l)(r(p))],"on-update:selected-keys":u,"block-line":"","expand-on-click":"",selectable:""},null,8,["data","default-expanded-keys","default-selected-keys"])}}},g={id:"webGL"},f={__name:"unity",setup(s){const{baseURL:t,unityURL:o}=window.this.geturlList(),r=e(),p=n((()=>r.URL)),u=n((()=>r.currentUnity)),c=n((()=>r.sendMessage));var v=a({});const f=e=>{v&&(v.send("SceneManagement","SetBundleUrl",e+"StreamingAssets"),v.send("SceneManagement","SetBaseUrl",t),v.send("SceneManagement","ChangeScene","room"))},y=e=>{var s;const t=null==(s=c.value)?void 0:s.split(",");v&&t&&t.length>0&&v.send(t[0],t[1],e)};function h(){v&&(null==v?void 0:v.unload)&&(null==v||v.unload(),null==$loading||$loading.finish(),console.log("卸载Unity"))}return l((()=>{var e;h(),e=p.value,(v=new j({loaderUrl:e+"Script.loader.js",dataUrl:e+"Script.data.gz",frameworkUrl:e+"Script.framework.js.gz",codeUrl:e+"Script.wasm.gz",streamingAssetsUrl:e+"StreamingAssets"})).on("progress",(e=>{e>0&&$loading.start(e)})),v.on("created",(()=>{console.log(u.value,"创建完成"),$loading.finish(),u.value.includes("home")?(f(p.value),window.SelectRoom=()=>{l((()=>{y(r.Unity)}))}):l((()=>{y(r.Unity)}))})),setTimeout((()=>{!async function(){null==v||v.create("#webGL")}()}),1e3)})),d((()=>{h()})),(e,s)=>(i(),m("canvas",g))}},y={class:"flex-column h-full"},h={__name:"index",setup:e=>(e,t)=>{const n=c("border2");return i(),m("div",y,[p(v,{data:r(s)},null,8,["data"]),p(n,null,{default:u((()=>[p(f)])),_:1})])}};export{h as default};
